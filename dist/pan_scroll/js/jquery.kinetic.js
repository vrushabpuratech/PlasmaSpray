!function(e){"use strict";var t={decelerate:!0,triggerHardware:!1,y:!0,x:!0,slowdown:.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}},n="kinetic-settings",o="kinetic-active";window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}),e.support=e.support||{},e.extend(e.support,{touch:"ontouchend"in document});var i=function(){return!1},s=function(e,t){return 0===Math.floor(Math.abs(e))?0:e*t},c=function(e,t){var n=e;return e>0?e>t&&(n=t):e<0-t&&(n=0-t),n},l=function(e,t){this.removeClass(e.movingClass.up).removeClass(e.movingClass.down).removeClass(e.movingClass.left).removeClass(e.movingClass.right).removeClass(e.deceleratingClass.up).removeClass(e.deceleratingClass.down).removeClass(e.deceleratingClass.left).removeClass(e.deceleratingClass.right),e.velocity>0&&this.addClass(t.right),e.velocity<0&&this.addClass(t.left),e.velocityY>0&&this.addClass(t.down),e.velocityY<0&&this.addClass(t.up)},a=function(e,t){var n,o,i=e[0];t.x&&i.scrollWidth>0?(i.scrollLeft=t.scrollLeft=i.scrollLeft+t.velocity,Math.abs(t.velocity)>0&&(t.velocity=t.decelerate?s(t.velocity,t.slowdown):t.velocity)):t.velocity=0,t.y&&i.scrollHeight>0?(i.scrollTop=t.scrollTop=i.scrollTop+t.velocityY,Math.abs(t.velocityY)>0&&(t.velocityY=t.decelerate?s(t.velocityY,t.slowdown):t.velocityY)):t.velocityY=0,l.call(e,t,t.deceleratingClass),"function"==typeof t.moved&&t.moved.call(e,t),Math.abs(t.velocity)>0||Math.abs(t.velocityY)>0?window.requestAnimationFrame(function(){a(e,t)}):(n=e,"function"==typeof(o=t).stopped&&o.stopped.call(n,o))},r=function(t,n){var o=t[0];e.support.touch?(o.addEventListener("touchstart",n.events.touchStart,!1),o.addEventListener("touchend",n.events.inputEnd,!1),o.addEventListener("touchmove",n.events.touchMove,!1)):t.mousedown(n.events.inputDown).mouseup(n.events.inputEnd).mousemove(n.events.inputMove),t.click(n.events.inputClick).bind("selectstart",i),t.bind("dragstart",n.events.dragStart)},u=function(i){this.addClass(o).each(function(){var o,s,u,v,d=e.extend({},t,i),f=this,p=e(this),m=!1,h=!1,g=!1,w=1e3/d.throttleFPS;d.velocity=0,d.velocityY=0;var y=function(){o=!1,s=!1,g=!1};e(document).mouseup(y).click(y);var C=function(){d.velocity=c(m-o,d.maxvelocity),d.velocityY=c(h-s,d.maxvelocity)},k=function(t){return!e.isFunction(d.filterTarget)||!1!==d.filterTarget.call(f,t)},Y=function(e,t){g=!0,d.velocity=m=0,d.velocityY=h=0,o=e,s=t},b=function(t,n){(!u||new Date>new Date(u.getTime()+w))&&(u=new Date,g&&(o||s)&&(v&&(e(v).blur(),v=null,p.focus()),d.decelerate=!1,d.velocity=d.velocityY=0,p[0].scrollLeft=d.scrollLeft=d.x?p[0].scrollLeft-(t-o):p[0].scrollLeft,p[0].scrollTop=d.scrollTop=d.y?p[0].scrollTop-(n-s):p[0].scrollTop,m=o,h=s,o=t,s=n,C(),l.call(p,d,d.movingClass),"function"==typeof d.moved&&d.moved.call(p,d)))};d.events={touchStart:function(e){k(e.target)&&(Y(e.touches[0].clientX,e.touches[0].clientY),e.stopPropagation())},touchMove:function(e){g&&(b(e.touches[0].clientX,e.touches[0].clientY),e.preventDefault&&e.preventDefault())},inputDown:function(e){k(e.target)&&(Y(e.clientX,e.clientY),v=e.target,"IMG"===e.target.nodeName&&e.preventDefault(),e.stopPropagation())},inputEnd:function(e){o&&m&&!1===d.decelerate&&(d.decelerate=!0,C(),o=m=g=!1,a(p,d)),v=null,e.preventDefault&&e.preventDefault()},inputMove:function(e){g&&(b(e.clientX,e.clientY),e.preventDefault&&e.preventDefault())},inputClick:function(e){if(Math.abs(d.velocity)>0)return e.preventDefault(),!1},dragStart:function(e){if(v)return!1}},r(p,d),p.data(n,d).css("cursor","move"),d.triggerHardware&&p.css("-webkit-transform","translate3d(0,0,0)")})};e.kinetic={settingsKey:n,callMethods:{start:function(t,n){var o=e(this);(t=e.extend(t,n))&&(t.decelerate=!1,a(o,t))},end:function(t,n){e(this);t&&(t.decelerate=!0)},stop:function(e,t){e.velocity=0,e.velocityY=0,e.decelerate=!0},detach:function(t,n){var s,c,l,a=e(this);c=t,l=(s=a)[0],e.support.touch?(l.removeEventListener("touchstart",c.events.touchStart,!1),l.removeEventListener("touchend",c.events.inputEnd,!1),l.removeEventListener("touchmove",c.events.touchMove,!1)):s.unbind("mousedown",c.events.inputDown).unbind("mouseup",c.events.inputEnd).unbind("mousemove",c.events.inputMove),s.unbind("click",c.events.inputClick).unbind("selectstart",i),s.unbind("dragstart",c.events.dragStart),a.removeClass(o).css("cursor","")},attach:function(t,n){var i=e(this);r(i,t),i.addClass(o).css("cursor","move")}}},e.fn.kinetic=function(t){return"string"==typeof t?function(t,o){var i=e.kinetic.callMethods[t],s=Array.prototype.slice.call(arguments);i&&this.each(function(){var t=s.slice(1),o=e(this).data(n);t.unshift(o),i.apply(this,t)})}.apply(this,arguments):u.call(this,t),this}}(window.jQuery||window.Zepto);